% setdefault(napaka, '')
% rebase('base.html', napaka = napaka, naslov = 'Knjige')

<div>
Išči po naslovu: <input id="isci" type="text" onchange="isci()"/>
</div>

<table id="tabela" cellpadding="0" cellspacing="0" border="1">
    <tr>
        <th>id_knjige</th>
        <th>avtor</th>
        <th>naslov</th>
        <th>cena_nakupa</th>
        <th>cena_izposoje</th>
    </tr>
    
    %for (id_knjige, naslov, id_avtorja, cena_nakupa, cena_izposoje) in knjige:
        <tr>
            <td>{{id_knjige}}</td>
            <td>{{id_avtorja}}</td>
            <td>{{naslov}}</td>
            <td>{{cena_nakupa}} 
                <form action="/knjiga/kupi/{{id_knjige}}" method="post"> 
                    <input value="Kupi" type="submit" />
                </form>
            </td>
            <td>{{cena_izposoje}}
                <form action="/knjiga/izposodi/{{id_knjige}}" method="post"> 
                    <input value="Izposodi" type="submit" />
                </form>
            </td>
        </tr>
    %end
    
</table>


<script>
    "use strict"
    function isci() {
        let vrednost = document.getElementById('isci').value;
        let tabela1 = document.getElementById('tabela');
        [...tabela1.rows].forEach(vrstica => {
            let vsebina = vrstica.cells[2].innerText
            if(vsebina.toLocaleLowerCase().indexOf(vrednost.toLocaleLowerCase()) >= 0) {
                vrstica.style.display = ''
            }
            else {
                vrstica.style.display = 'none'
            }
        });
    }
</script>